# 个人传记撰写Agent应用架构

## 应用概述
这是一个能自主调用工具的AI Agent应用，专门用于根据用户提供的图片生成专业的个人传记，并输出为带有二维码的PDF故事书。

## 核心功能
1. **智能图片分析**: 分析用户上传的图片，提取关键信息
2. **专业传记撰写**: 基于图片内容生成高质量的个人传记
3. **图文并茂排版**: 自动进行图文排版，生成美观的故事书
4. **二维码生成**: 为每张图片和视频生成二维码链接
5. **PDF导出**: 生成可下载的PDF格式故事书

## 架构层级

### 1. 表示层 (Presentation Layer)
- **Web界面**: 用户交互界面
- **文件上传组件**: 支持图片和视频上传
- **预览组件**: 实时预览生成的传记内容
- **下载组件**: PDF文件下载功能

### 2. Agent核心层 (Agent Core Layer)
- **Agent编排器**: 协调各个工具的调用
- **任务队列**: 管理异步任务处理
- **状态管理**: 跟踪处理进度和状态
- **错误处理**: 统一的错误处理机制

### 3. 工具调用层 (Tools Layer)
- **图片分析工具**: 分析图片内容和元数据
- **文本生成工具**: 调用大模型生成传记内容
- **排版工具**: 自动图文排版
- **二维码生成工具**: 生成图片/视频的二维码
- **PDF生成工具**: 渲染并生成PDF文件

### 4. 服务层 (Service Layer)
- **大模型接入服务**: 统一的AI模型调用接口
- **文件处理服务**: 图片和视频处理
- **存储服务**: 文件和数据存储
- **缓存服务**: 提高处理效率

### 5. 数据层 (Data Layer)
- **文件存储**: 用户上传的图片和视频
- **传记数据**: 生成的传记内容
- **模板存储**: PDF模板和样式配置

## 技术栈
- **后端**: Python FastAPI
- **AI框架**: LangChain + 自定义工具
- **图片处理**: Pillow, OpenCV
- **PDF生成**: ReportLab, WeasyPrint
- **二维码**: qrcode库
- **前端**: React/Vue.js
- **数据库**: SQLite/PostgreSQL
- **文件存储**: 本地存储/云存储

## 大模型接入点
以下位置需要接入大模型，支持灵活配置不同厂商：

1. **图片理解模型** (GPT-4V/Claude-3/Gemini Pro Vision)
2. **文本生成模型** (GPT-4/Claude-3/文心一言/通义千问)
3. **文本优化模型** (专门用于文本润色和优化)

## 配置化设计
所有大模型接入都通过配置文件管理，支持快速切换不同厂商和模型。 